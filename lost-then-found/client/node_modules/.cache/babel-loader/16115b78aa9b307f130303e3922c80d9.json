{"ast":null,"code":"'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nconst ReadPreference = require('../core').ReadPreference;\n\nconst maxWireVersion = require('../core/utils').maxWireVersion;\n\nconst MongoError = require('../core/error').MongoError;\n\nclass FindOperation extends OperationBase {\n  constructor(collection, ns, command, options) {\n    super(options);\n    this.ns = ns;\n    this.cmd = command;\n    this.readPreference = ReadPreference.resolve(collection, this.options);\n  }\n\n  execute(server, callback) {\n    // copied from `CommandOperationV2`, to be subclassed in the future\n    this.server = server;\n\n    if (typeof this.cmd.allowDiskUse !== 'undefined' && maxWireVersion(server) < 4) {\n      callback(new MongoError('The `allowDiskUse` option is not supported on MongoDB < 3.2'));\n      return;\n    } // TOOD: use `MongoDBNamespace` through and through\n\n\n    const cursorState = this.cursorState || {};\n    server.query(this.ns.toString(), this.cmd, cursorState, this.options, callback);\n  }\n\n}\n\ndefineAspects(FindOperation, [Aspect.READ_OPERATION, Aspect.RETRYABLE, Aspect.EXECUTE_WITH_SELECTION]);\nmodule.exports = FindOperation;","map":{"version":3,"sources":["/Users/rohanvarshney/Google Drive/GitHub/LostThenFound/lost-then-found/node_modules/mongodb/lib/operations/find.js"],"names":["OperationBase","require","Aspect","defineAspects","ReadPreference","maxWireVersion","MongoError","FindOperation","constructor","collection","ns","command","options","cmd","readPreference","resolve","execute","server","callback","allowDiskUse","cursorState","query","toString","READ_OPERATION","RETRYABLE","EXECUTE_WITH_SELECTION","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,aAA7C;;AACA,MAAME,MAAM,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBC,MAAtC;;AACA,MAAMC,aAAa,GAAGF,OAAO,CAAC,aAAD,CAAP,CAAuBE,aAA7C;;AACA,MAAMC,cAAc,GAAGH,OAAO,CAAC,SAAD,CAAP,CAAmBG,cAA1C;;AACA,MAAMC,cAAc,GAAGJ,OAAO,CAAC,eAAD,CAAP,CAAyBI,cAAhD;;AACA,MAAMC,UAAU,GAAGL,OAAO,CAAC,eAAD,CAAP,CAAyBK,UAA5C;;AAEA,MAAMC,aAAN,SAA4BP,aAA5B,CAA0C;AACxCQ,EAAAA,WAAW,CAACC,UAAD,EAAaC,EAAb,EAAiBC,OAAjB,EAA0BC,OAA1B,EAAmC;AAC5C,UAAMA,OAAN;AAEA,SAAKF,EAAL,GAAUA,EAAV;AACA,SAAKG,GAAL,GAAWF,OAAX;AACA,SAAKG,cAAL,GAAsBV,cAAc,CAACW,OAAf,CAAuBN,UAAvB,EAAmC,KAAKG,OAAxC,CAAtB;AACD;;AAEDI,EAAAA,OAAO,CAACC,MAAD,EAASC,QAAT,EAAmB;AACxB;AACA,SAAKD,MAAL,GAAcA,MAAd;;AAEA,QAAI,OAAO,KAAKJ,GAAL,CAASM,YAAhB,KAAiC,WAAjC,IAAgDd,cAAc,CAACY,MAAD,CAAd,GAAyB,CAA7E,EAAgF;AAC9EC,MAAAA,QAAQ,CAAC,IAAIZ,UAAJ,CAAe,6DAAf,CAAD,CAAR;AACA;AACD,KAPuB,CASxB;;;AACA,UAAMc,WAAW,GAAG,KAAKA,WAAL,IAAoB,EAAxC;AACAH,IAAAA,MAAM,CAACI,KAAP,CAAa,KAAKX,EAAL,CAAQY,QAAR,EAAb,EAAiC,KAAKT,GAAtC,EAA2CO,WAA3C,EAAwD,KAAKR,OAA7D,EAAsEM,QAAtE;AACD;;AArBuC;;AAwB1Cf,aAAa,CAACI,aAAD,EAAgB,CAC3BL,MAAM,CAACqB,cADoB,EAE3BrB,MAAM,CAACsB,SAFoB,EAG3BtB,MAAM,CAACuB,sBAHoB,CAAhB,CAAb;AAMAC,MAAM,CAACC,OAAP,GAAiBpB,aAAjB","sourcesContent":["'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst Aspect = require('./operation').Aspect;\nconst defineAspects = require('./operation').defineAspects;\nconst ReadPreference = require('../core').ReadPreference;\nconst maxWireVersion = require('../core/utils').maxWireVersion;\nconst MongoError = require('../core/error').MongoError;\n\nclass FindOperation extends OperationBase {\n  constructor(collection, ns, command, options) {\n    super(options);\n\n    this.ns = ns;\n    this.cmd = command;\n    this.readPreference = ReadPreference.resolve(collection, this.options);\n  }\n\n  execute(server, callback) {\n    // copied from `CommandOperationV2`, to be subclassed in the future\n    this.server = server;\n\n    if (typeof this.cmd.allowDiskUse !== 'undefined' && maxWireVersion(server) < 4) {\n      callback(new MongoError('The `allowDiskUse` option is not supported on MongoDB < 3.2'));\n      return;\n    }\n\n    // TOOD: use `MongoDBNamespace` through and through\n    const cursorState = this.cursorState || {};\n    server.query(this.ns.toString(), this.cmd, cursorState, this.options, callback);\n  }\n}\n\ndefineAspects(FindOperation, [\n  Aspect.READ_OPERATION,\n  Aspect.RETRYABLE,\n  Aspect.EXECUTE_WITH_SELECTION\n]);\n\nmodule.exports = FindOperation;\n"]},"metadata":{},"sourceType":"script"}